# 计算机硬件
## CPU
1. CPU主要分为控制单位和运算逻辑单元
2. CPU由指令集的不同，可分为两种架构
	1. 简单指令集架构：产生的CPU有ARM，PowerPC等，主要应用于手机交换机路由器等
	2. 复杂指令集架构：产生的CPU有ADM，Intel等，应用于pc机
3. 内、外、倍频 内 = 外 *  倍
	1. 内频：CPU本身的运行速度
	2. 外频：CPU与外部元件传输数据的速度
	3. 倍频：CPU 內部用來加速工作效能的一个倍数
4. 工作速率：3.6GHz = 3.6 * 10的9次方，意思每秒工作3.6 * 10的9次方次
5. 32位与64位
	1. 32位电脑一次只能处理4字节数据，且由于32位电脑一般有32条地址线，所以只支持4GB大小的内存
6. CPU核心数概念，例如一个CPU里面有四个物理核，就可以看做4个小CPU集成在一起，一个物理核可以有2个线程，通过超线程技术实现
## 内存
1. CPU所使用的资料都来自于内存
2. DDR内存条是双倍资料传送速度，可在一次工作周期中进行两次资料传送
3. 双通道：如果一支DDR传输位数是64，那么双通道传输位数就是128
4. CPU内部也有内存，缓存区L1,L2,L3
	1. L1缓存最常用的命令和数据，速度最快
	2. L2缓存更多数据和命令，速度比L1慢
	3. L3缓存共享数据，例如一个CPU核心数一个，通过超线程技术，可以有两个线程，运行同时运行两个任务，这两个任务共同的数据可以缓存在L3内
5. 只读内存ROM：一般写在硬件上面，例如主板上写入了BIOS程序，就是只读内存

## 编译器、系统内核、应用程序、驱动程序
```bash
编译器：计算机只识别二进制，如果没有高级语言及编译器，就需要学习二进制开发，这很难

操作系统：主要是用来调用硬件，分配资源等，操作系统也是一套程序，为了保护操作系统，一般都把操作系写入ROM内存，只可读不可修改，且会提供一整套的操作系统接口给用户开发

应用程序：應用程式是參考作業系統提供的開發介面所開發出來軟體，這些軟體可以讓使用者操作，以達到某些電腦的功能利用。

驱动程序：内核不更新，如果出现新的硬件例如新版显卡，这时内核是不认识这块设备的，厂商需要参考内核暴露出来的开发手册自行开发驱动程序用来驱动这块硬件

```
# linux发展历史
```bash
1960 : 相容分时系统
1965 : 贝尔、MBI、奇异果等公司发起multics 计划，计划把相容分时系统发展成支持200多台终端
1969 : multics计划终止，之后贝尔实验室人员Ken Thompson 简化multics期间的研究，用组合语言写出Unics
1973 : ritchie改进B语言为C语言，并用C语言重写Unics，最终Unix诞生
由于C语言与硬件关系没组合语言那么大，且c语言能编写硬件抽象层，可移植性大大增加，这一时期，各个公司为了适配主机，对Unix进行自身硬件适配(硬件底层实现不同)的改写，这出现了很多Unix版本
1979 : System V 第七版Unix，支持X86硬件架构，且在这一时期，AT&T收回Unix版权，不允许对学生提供源代码
1984 : 谭宁邦开始写x86架构Minix，并于1986年完成
1984 : 斯托曼发起GNU计划，
1991 : linux发布
```
# 磁盘分区主要格式
### MBR
```bash
master boot record 主要启动记录格式

这种格式每个扇区大小512字节(旧的磁盘，新的可达4KB)。

第一个扇区其中有64个字节存储分区表，只能有4个分区

每个分区表用4个字节表示，4个字节，32位，最多可以找到2的32次方个扇区，这就限制了MBR方案每个分区无法支持2TB大小的硬盘。如果4TB，可以分两个区，一个区2TB，每个分区的扇区编号是独立的，每个分区内的扇区编号从0开始，但整个硬盘的扇区编号是连续的‌

磁道：磁道是硬盘盘片上的同心圆轨迹，数据存储在这些轨迹上。每个磁道可以看作是盘片上的一个圆环。

柱面：简单来说，柱面就是由同一半径的磁道垂直叠在一起形成的。是最小的分区单位

例题：假定一个磁盘存储器有4个盘片,用于记录信息的柱面数为2000,每个磁道上有3000个扇区,每个扇区512B,则该磁盘存储器的容量约为
4 * 2 * 2000 * 3000 * 512  24GB
```
### GPT
```bash
GPT使用LBA（Logical Block Address）来定义扇区GPT 将磁盘所有区块以此 LBA（默认为 512Bytes ） 来规划

LBA0 与 MBR 一样存储启动程序

LBA1 记录了分区表本身的位置与大小，同时记录了备用的GPT分区放置的位置

LBA2-33 分区信息

最后33个LBD 备份分区信息
```
# BIOS 和 CMOS 开机流程
```bash
CMOS：记录各项硬件参数且嵌入在主板上面的储存器
BIOS：一个写入到主板的一个程序

开机流程
1.BIOS：开机主动运行的软件，会找到第一个可开机的设备
2.MBR：第一个可开机设备的第一个扇区，内含开机管理程序
3.开机管理程序：一支可读取核心文件的软件
4.核心文件：开始操作系统的功能
```
# 操作系统
## 组成
1. 硬件
2. 内核
3. 系统调用层
4. 应用层
5. 用户层
2与3其实就是操作系统
## 操作系统的可移植性
c语言编写的操作系统，大大增强了系统的可移植性，主要原因是c语言能提供更高的抽象层级，例如硬件抽象层

硬件抽象层的抽象能力也是有限的，例如对底层实现原理一致的，但型号不同的硬件，可以抽象

但对底层实现原理都不一致，例如CPU的指令集不同，固态和机械硬盘的存储不同，就不能抽象出来

所以说，操作系统虽然通过硬件抽象层增强了可移植性，但也不是完成不依赖硬件
## 操作系统暴露的接口
### 系统调用层
针对开发者所提供的接口
### 图形化与命令行
针对使用者所提供的接口，底层其实还是调用的系统调用层，例如你删除一个文件，底层还是通过系统调用层请求内核，从而对磁盘进行内容删除
## 应用的可移植性
应用的可移植主要是避免直接调用系统调用层暴露的接口，而使用库函数，库函数对系统调用层进行封装