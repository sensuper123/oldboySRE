# 电子邮箱
```bash
linux任务计划、周期性任务执行
	未来某时间点执行一次某任务: at、batch
	周期性运行某任务: crontab
		执行结果: 会通过邮件发送给用户
		
监听25端口，说明邮件服务已开启
	netstat -tnlp
	ss -tnl 
	
本地电子邮件服务:
	stmp: simple mail transmission Procotol 简单邮件传输协议
	pop3: Post Office Procotol 
	imap4: Internet mail access procotol
	

	mall命令
		mallx - send and recelve internet mall	
		MUA: Mail User Agent,用户收发邮件的工具程序
		
		mailx [-s "subject"] username[@hostname]
		mailx -s "to you user" user1
			邮件正文的生成
				1.交互式输入，.单独成行可以表示正文结束
				2.通过输入重定向
				3.通过管道
		
		

```
# 计划任务
```bash
at [option]... time
	time
		HH:MM [YYYY-mm-dd]
		noon,midnight,teatime
		tomorrow
		now+#
			UNIT:minutes,hours,days,OR,weeks
			
	常用选项
		-l: 查看作业队列，相当于atq
		-f /PATH/FROM/SOMEFILE: 从指定文件中读取作业任务，而不用交互式
		-d: 删除指定的作业，相当于atrm
		-c: 查看指定作业的具体内容
		-q: 指明队列
		
		
batch命令
	batch会让系统自动选择在系统资源较空闲的时间去执行指定的任务
	
	
周期性任务计划
	服务程序
		cronle: 主程序包，提供了crond守护进程及相关辅助工具
	确保crond守护进程(daemon)处于运行状态
		Centos7
			systemctl status crond.service
		Centos6
			service crond status
			
	向crond提交作业的方式不同于at,它需要使用专门的配置文件，此文件有固定格式，不建议使用文本编辑器直接编辑此文件，要使用crontab命令
		cron任务分两类
			系统cron任务: 主要用于实现系统自身的维护
				手动编辑: /etc/crontab文件
				
			用户cron任务
				命令: crontab命令
				位置: /var/spool/cron/username
				
			系统cron的配置格式
				SHELL=/bin/bash
				PATH=/sbin:/bin:/usr/sbin:/usr/bin
				MAILTO=root
				
				# For details see man 4 crontabs
				
				# Example of job definition:
				# .---------------- minute (0 - 59)
				# |  .------------- hour (0 - 23)
				# |  |  .---------- day of month (1 - 31)
				# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...
				# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
				# |  |  |  |  |
				# *  *  *  *  * user-name  command to be executed
			
		时间表示法
			1.特定值
				给定时间点有效取值范围内的值
					注意: day of week 和day of month一般不同时使用
			
			2.*
				给定时间点上有效取值范围内的所有值,表示"每"
				
			3.离散取值
				在时间点上使用逗号分割的多个值
				
		示例
			每小时的第3分钟执行一次 3 * * * * 
			每周5的4点3分执行 3 4 * *  5
			每月的7号的6点5分执行 5 6 7 * *
			每年的10月9号8点7分 3 8 9 10 *
			每周三和周日 0 * * * 3,7
			每五分钟执行一次 */5 * * * * 
			
			
		crontab命令
			crontab [-u user] [-l] [-r] [-e] [-i] 
				-e: 编辑任务
				-l: 列出所有任务
				-r: 移除所有任务
				-i: 在使用-r选项时提示用户确认
				-u user: root用户可制定用户管理cron任务
				
		注意:运行结果以邮件通知给当前用户，如果拒绝接受邮件
			COMMAND > /dev/null
			COMMAND &> /dev/null
			
		注意: 定义COMMANND时，如果命令需要用到%,需要对其转义，但放置于单引号的%不用转义也可
		
练习
	1.每12小时备份一次/etc目录至/backups目录中，保存文件名称格式为"etc-yyyy-mm-dd-hh.tar.xz"
	0 */12 * * * tar Jcf /backups/etc-$(date +%F-%H).tar.xz /etc
	2.每周2、4、7备份/var/log/secure文件至/logs目录中，文件名格式为 "secure-yyyymmdd"
	0 0 * * 2,4,7 gzip -c  /var/log/secure  >  /logs/secure-$(date +%Y%m%d).gz

	3.每两小时取出当前系统/proc/meminfo文件中以S或M开头的行信息追加至/tmp/meminfo.txt文件中
	0 */2 * * * cat /proc/meminfo | grep "^[S|M]" > /tmp/meminfo.txt
```